
import System.FSNotify
import Data.String
import Control.Concurrent.MVar

:{
:def test const (withManager (\manager -> 
     do putStrLn "Listening to changes..."
        lock <- newEmptyMVar
        watchTree manager (fromString ".") (const True) (const $ putMVar lock ())
        _ <- readMVar lock
        return ":reload \n :main \n :test"
     ))
:}
